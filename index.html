<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Socket.io</title>
</head>
<body>
<h1>Express and socket.io</h1>
<div id="news-list"></div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js"></script>
<script>
    var socket = io(location.origin,{ path: '/node/', transports: ['websocket']});

    socket.on('news', function (data) {
        var div = document.getElementById("news-list");
        console.log("Rendering news : ",data);

        for(var i = 0;i < data.length;i++){
            var newsItem = data[i];
            div.innerHTML += "<h3>" + newsItem.title + ' <small>'+ newsItem.date + "</small></h3><br>";
        }

        socket.emit('my other event', { my: 'data' });
    });
</script>
</body>
</html>
